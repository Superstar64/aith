#{
 Copyright (C) 2020 Freddy Angel Cubas "Superstar64"
 Distributed under the Boost Software License, Version 1.0.
 (See accompanying file BSL.txt or copy at https://www.boost.org/LICENSE_1_0.txt)
#}

~ <a extends unrestricted> (& (& raw a[], raw a[] &), world &) -> (& (&&), world &) ~
template copy = (from,to) { do =>
	run assert(from.length == to.length);
	if(from.length == 0){
		()
	} else {
		run to&[0] <- try{from[0]};
		run curry(copy`)(from[1..from.length], to[1..to.length]);
		()
	}
}.uncurry;


~ world -> (& (&&), world &) ~
symbol main = do {
	base = try => [(true,true),(true,false),(false,false)];
	expected = try => [(true,true),(true,false),(false,false)];
	target = try => new array(3)(false,false); 
	run curry(copy`)(base, target);
	run assert(target == expected);
	()
};
